# Coordinator Dashboard Implementation Tasks

## Context
Implementing Phase 2.1 of the MVP plan: full Coordinator Dashboard for EXAM_COORDINATOR role. Building exam CRUD, lifecycle management, and enrollment management following existing admin/author patterns.

Stack: Next.js 16 App Router, React 19, Server Actions, Prisma, Better Auth, shadcn/ui

---

## Task 1: Server Actions for Exams
**Status**: ✅ complete
**Files**: apps/coordinator/app/actions/exams.ts (create)

Implement all exam-related server actions with permission checks:
- Helper: getSessionAndOrg()
- Queries: getExams(), getExamById(), getApprovedQuestionBanks(), getDepartments()
- Mutations: createExam(), updateExam(), updateExamStatus(), deleteExam()
- All actions use requirePermission() for RBAC
- Handle exam lifecycle constraints (only edit DRAFT/SCHEDULED, only delete DRAFT)

---

## Task 2: Server Actions for Enrollments
**Status**: ✅ complete
**Files**: apps/coordinator/app/actions/enrollments.ts (create)

Implement enrollment management server actions:
- Helper: getSessionAndOrg()
- Queries: getEnrollments()
- Mutations: inviteCandidate(), bulkInviteCandidates(), approveEnrollment(), rejectEnrollment(), removeEnrollment()
- Bulk invite returns success/error breakdown
- All actions check permissions and org boundaries

---

## Task 3: Exam List Page
**Status**: ✅ complete
**Files**: apps/coordinator/app/dashboard/page.tsx (modify)

Replace placeholder dashboard with exam list:
- Display all exams as cards in responsive grid
- Show status badge, schedule, enrolled count, duration, passing score
- Empty state with "Create First Exam" CTA
- Links to exam detail and create pages
- Status badge colors match exam lifecycle

---

## Task 4: Create Exam Form Component
**Status**: ✅ complete
**Files**: apps/coordinator/app/dashboard/exams/exam-form.tsx (create)

Reusable client component for create/edit modes:
- Basic info: title, description, department, question bank
- Configuration: duration, passing score, allowed attempts
- Schedule: start/end datetime
- Proctoring: enable recording toggle
- Form state management, validation, error handling
- Submit calls createExam or updateExam based on mode

---

## Task 5: Create Exam Page
**Status**: ✅ complete
**Files**: apps/coordinator/app/dashboard/exams/new/page.tsx (create)

Server component for new exam page:
- Load approved question banks and departments
- Show message if no question banks available
- Render ExamForm in create mode

---

## Task 6: Exam Detail Page
**Status**: ✅ complete
**Files**: apps/coordinator/app/dashboard/exams/[id]/page.tsx (create)

Server component showing full exam details:
- Header with title, status badge, edit button, actions dropdown
- Optional description card
- Configuration card (duration, passing score, attempts, recording)
- Schedule card (start/end dates)
- Question bank card
- Enrollment list component

---

## Task 7: Exam Actions Component
**Status**: pending
**Files**: apps/coordinator/app/dashboard/exams/[id]/exam-actions.tsx (create)

Client component for exam lifecycle actions:
- Dropdown menu with status-based actions
- Schedule (DRAFT → SCHEDULED)
- Activate (SCHEDULED → ACTIVE)
- Complete (ACTIVE → COMPLETED)
- Delete (DRAFT only) with confirmation dialog

---

## Task 8: Enrollment List Component
**Status**: pending
**Files**: apps/coordinator/app/dashboard/exams/[id]/enrollment-list.tsx (create)

Client component for enrollment management:
- Display enrollments with status badges
- Single invite dialog (email input)
- Bulk invite dialog (textarea for multiple emails)
- Per-enrollment actions: approve, reject, remove
- Error handling and feedback

---

## Task 9: Edit Exam Page
**Status**: pending
**Files**: apps/coordinator/app/dashboard/exams/[id]/edit/page.tsx (create)

Server component for editing exams:
- Load exam data, question banks, departments
- Pass exam data as initialData to ExamForm
- Render ExamForm in edit mode

---

## Task 10: Update Dashboard Layout Navigation
**Status**: pending
**Files**: apps/coordinator/app/dashboard/layout.tsx (modify)

Update navigation for coordinator dashboard:
- Read existing layout structure
- Add Exams nav item with Calendar icon pointing to /dashboard
- Maintain existing layout patterns

---

## Task 11: Final Testing & Polish
**Status**: pending
**Files**: N/A (testing)

Manual testing of all flows:
- Create exam flow (form → submit → detail page)
- Edit exam flow (detail → edit → save → detail)
- Single invite (dialog → submit → list updates)
- Bulk invite (textarea → submit → multiple enrollments)
- Enrollment actions (approve/reject/remove)
- Exam lifecycle (DRAFT → SCHEDULED → ACTIVE → COMPLETED)

---

## Task 12: Documentation
**Status**: pending
**Files**: N/A (git operations)

Finalize implementation:
- Review CLAUDE.md (no changes needed - follows existing patterns)
- Push feature branch to origin
- Mark beads issue proctor-exam-mvp-4u8 as complete
- Final commit documenting Phase 2.1 completion
