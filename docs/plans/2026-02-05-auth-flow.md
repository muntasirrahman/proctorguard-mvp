# Auth Flow Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add sign-in, sign-up, session-aware dashboard layouts with nav/user-menu/sign-out across all 5 apps.

**Architecture:** Better Auth client (`better-auth/react`) handles client-side auth calls. Each app gets auth pages (sign-in, sign-up for candidate only) and a shared dashboard layout that checks the session server-side and renders a sidebar/header with user info + sign-out. Auth pages are shared components in `packages/ui` to avoid duplication (DRY). Dashboard layout is per-app since each app has different nav items and branding.

**Tech Stack:** Better Auth v1.1.4, Next.js 16 App Router, React 19, `@proctorguard/ui` (shadcn/ui), `@proctorguard/auth`

---

## Task 1: Create Better Auth Client Package

Create the client-side auth client that all 5 apps will import for sign-in/sign-up/sign-out and `useSession`.

**Files:**
- Create: `packages/auth/client.ts`

**Step 1: Create the auth client**

```ts
// packages/auth/client.ts
import { createAuthClient } from 'better-auth/react';

export const authClient = createAuthClient();

export const { signIn, signUp, signOut, useSession } = authClient;
```

Better Auth's `createAuthClient()` with no arguments defaults to the current origin, which works because each app runs its own auth route at `/api/auth/[...all]`.

**Step 2: Verify the import resolves**

Run: `cd /Users/muntasir/workspace/proctor-exam/proctor-exam-mvp && npx tsc --noEmit -p packages/auth/tsconfig.json 2>&1 || echo "No tsconfig, check manually"`

If `packages/auth` has no tsconfig, just verify the import path exists:
Run: `node -e "require.resolve('better-auth/react')" 2>&1 || echo "Need to check better-auth exports"`

**Step 3: Commit**

```bash
git add packages/auth/client.ts
git commit -m "feat(auth): add Better Auth client with signIn, signUp, signOut, useSession exports"
```

---

## Task 2: Create Shared Auth Form Components in packages/ui

Build reusable sign-in and sign-up form components so all 5 apps use the same UI. These are client components that call the Better Auth client.

**Files:**
- Create: `packages/ui/components/sign-in-form.tsx`
- Create: `packages/ui/components/sign-up-form.tsx`
- Modify: `packages/ui/index.tsx` (add exports)
- Modify: `packages/ui/package.json` (add `@proctorguard/auth` dependency)

**Step 1: Add auth dependency to UI package**

In `packages/ui/package.json`, add to dependencies:
```json
"@proctorguard/auth": "*"
```

**Step 2: Create the sign-in form component**

```tsx
// packages/ui/components/sign-in-form.tsx
'use client';

import { useState } from 'react';
import { signIn } from '@proctorguard/auth/client';
import { Button } from './button';
import { Input } from './input';
import { Label } from './label';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './card';

interface SignInFormProps {
  appName: string;
  redirectTo?: string;
  signUpUrl?: string;
}

export function SignInForm({ appName, redirectTo = '/dashboard', signUpUrl }: SignInFormProps) {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);

  async function handleSubmit(e: React.FormEvent) {
    e.preventDefault();
    setError('');
    setLoading(true);

    const { error: signInError } = await signIn.email(
      { email, password, callbackURL: redirectTo },
      {
        onSuccess: () => {
          window.location.href = redirectTo;
        },
        onError: (ctx) => {
          setError(ctx.error.message);
          setLoading(false);
        },
      }
    );

    if (signInError) {
      setError(signInError.message || 'Sign in failed');
      setLoading(false);
    }
  }

  return (
    <Card className="w-full max-w-md">
      <CardHeader className="space-y-1">
        <CardTitle className="text-2xl font-bold">Sign In</CardTitle>
        <CardDescription>{appName}</CardDescription>
      </CardHeader>
      <CardContent>
        <form onSubmit={handleSubmit} className="space-y-4">
          {error && (
            <div className="rounded-md bg-destructive/10 p-3 text-sm text-destructive">
              {error}
            </div>
          )}
          <div className="space-y-2">
            <Label htmlFor="email">Email</Label>
            <Input
              id="email"
              type="email"
              placeholder="you@example.com"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
              autoComplete="email"
            />
          </div>
          <div className="space-y-2">
            <Label htmlFor="password">Password</Label>
            <Input
              id="password"
              type="password"
              placeholder="Enter your password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              autoComplete="current-password"
            />
          </div>
          <Button type="submit" className="w-full" disabled={loading}>
            {loading ? 'Signing in...' : 'Sign In'}
          </Button>
          {signUpUrl && (
            <p className="text-center text-sm text-muted-foreground">
              Don&apos;t have an account?{' '}
              <a href={signUpUrl} className="text-primary underline-offset-4 hover:underline">
                Sign up
              </a>
            </p>
          )}
        </form>
      </CardContent>
    </Card>
  );
}
```

**Step 3: Create the sign-up form component**

```tsx
// packages/ui/components/sign-up-form.tsx
'use client';

import { useState } from 'react';
import { signUp } from '@proctorguard/auth/client';
import { Button } from './button';
import { Input } from './input';
import { Label } from './label';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './card';

interface SignUpFormProps {
  appName: string;
  redirectTo?: string;
  signInUrl?: string;
}

export function SignUpForm({ appName, redirectTo = '/dashboard', signInUrl = '/auth/signin' }: SignUpFormProps) {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);

  async function handleSubmit(e: React.FormEvent) {
    e.preventDefault();
    setError('');

    if (password.length < 8) {
      setError('Password must be at least 8 characters');
      return;
    }

    setLoading(true);

    const { error: signUpError } = await signUp.email(
      { email, password, name, callbackURL: redirectTo },
      {
        onSuccess: () => {
          window.location.href = redirectTo;
        },
        onError: (ctx) => {
          setError(ctx.error.message);
          setLoading(false);
        },
      }
    );

    if (signUpError) {
      setError(signUpError.message || 'Sign up failed');
      setLoading(false);
    }
  }

  return (
    <Card className="w-full max-w-md">
      <CardHeader className="space-y-1">
        <CardTitle className="text-2xl font-bold">Create Account</CardTitle>
        <CardDescription>{appName}</CardDescription>
      </CardHeader>
      <CardContent>
        <form onSubmit={handleSubmit} className="space-y-4">
          {error && (
            <div className="rounded-md bg-destructive/10 p-3 text-sm text-destructive">
              {error}
            </div>
          )}
          <div className="space-y-2">
            <Label htmlFor="name">Full Name</Label>
            <Input
              id="name"
              type="text"
              placeholder="Jane Doe"
              value={name}
              onChange={(e) => setName(e.target.value)}
              required
              autoComplete="name"
            />
          </div>
          <div className="space-y-2">
            <Label htmlFor="email">Email</Label>
            <Input
              id="email"
              type="email"
              placeholder="you@example.com"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
              autoComplete="email"
            />
          </div>
          <div className="space-y-2">
            <Label htmlFor="password">Password</Label>
            <Input
              id="password"
              type="password"
              placeholder="At least 8 characters"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              minLength={8}
              autoComplete="new-password"
            />
          </div>
          <Button type="submit" className="w-full" disabled={loading}>
            {loading ? 'Creating account...' : 'Create Account'}
          </Button>
          <p className="text-center text-sm text-muted-foreground">
            Already have an account?{' '}
            <a href={signInUrl} className="text-primary underline-offset-4 hover:underline">
              Sign in
            </a>
          </p>
        </form>
      </CardContent>
    </Card>
  );
}
```

**Step 4: Create a UserMenu component for the dashboard header**

```tsx
// packages/ui/components/user-menu.tsx
'use client';

import { signOut, useSession } from '@proctorguard/auth/client';
import { Button } from './button';

export function UserMenu() {
  const { data: session, isPending } = useSession();

  if (isPending) {
    return <div className="h-8 w-8 animate-pulse rounded-full bg-muted" />;
  }

  if (!session) {
    return null;
  }

  async function handleSignOut() {
    await signOut({
      fetchOptions: {
        onSuccess: () => {
          window.location.href = '/auth/signin';
        },
      },
    });
  }

  return (
    <div className="flex items-center gap-3">
      <div className="text-right hidden sm:block">
        <p className="text-sm font-medium leading-none">{session.user.name}</p>
        <p className="text-xs text-muted-foreground">{session.user.email}</p>
      </div>
      <div className="flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground text-sm font-medium">
        {session.user.name?.charAt(0)?.toUpperCase() || '?'}
      </div>
      <Button variant="ghost" size="sm" onClick={handleSignOut}>
        Sign out
      </Button>
    </div>
  );
}
```

**Step 5: Export new components from packages/ui/index.tsx**

Add these lines to `packages/ui/index.tsx`:

```ts
export * from './components/sign-in-form';
export * from './components/sign-up-form';
export * from './components/user-menu';
```

**Step 6: Commit**

```bash
git add packages/ui/components/sign-in-form.tsx packages/ui/components/sign-up-form.tsx packages/ui/components/user-menu.tsx packages/ui/index.tsx packages/ui/package.json
git commit -m "feat(ui): add SignInForm, SignUpForm, and UserMenu shared components"
```

---

## Task 3: Create Auth Pages for All 5 Apps

Each app gets a sign-in page. Only the candidate app gets a sign-up page.

**Files (per app pattern):**
- Create: `apps/{app}/app/auth/signin/page.tsx`
- Create: `apps/candidate/app/auth/signup/page.tsx` (candidate only)

**Step 1: Create sign-in pages for all 5 apps**

All sign-in pages follow the same pattern. Create each one:

```tsx
// apps/candidate/app/auth/signin/page.tsx
import { SignInForm } from '@proctorguard/ui';

export default function SignInPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4">
      <SignInForm
        appName="Candidate Portal"
        redirectTo="/dashboard"
        signUpUrl="/auth/signup"
      />
    </div>
  );
}
```

```tsx
// apps/admin/app/auth/signin/page.tsx
import { SignInForm } from '@proctorguard/ui';

export default function SignInPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-indigo-950 p-4">
      <SignInForm appName="Admin Dashboard" redirectTo="/dashboard" />
    </div>
  );
}
```

```tsx
// apps/author/app/auth/signin/page.tsx
import { SignInForm } from '@proctorguard/ui';

export default function SignInPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 dark:from-slate-900 dark:to-emerald-950 p-4">
      <SignInForm appName="Question Author" redirectTo="/dashboard" />
    </div>
  );
}
```

```tsx
// apps/coordinator/app/auth/signin/page.tsx
import { SignInForm } from '@proctorguard/ui';

export default function SignInPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-violet-100 dark:from-slate-900 dark:to-violet-950 p-4">
      <SignInForm appName="Exam Coordinator" redirectTo="/dashboard" />
    </div>
  );
}
```

```tsx
// apps/reviewer/app/auth/signin/page.tsx
import { SignInForm } from '@proctorguard/ui';

export default function SignInPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-100 dark:from-slate-900 dark:to-amber-950 p-4">
      <SignInForm appName="Session Reviewer" redirectTo="/dashboard" />
    </div>
  );
}
```

**Step 2: Create sign-up page for candidate app only**

```tsx
// apps/candidate/app/auth/signup/page.tsx
import { SignUpForm } from '@proctorguard/ui';

export default function SignUpPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4">
      <SignUpForm
        appName="Candidate Portal"
        redirectTo="/dashboard"
        signInUrl="/auth/signin"
      />
    </div>
  );
}
```

**Step 3: Commit**

```bash
git add apps/candidate/app/auth/signin/page.tsx apps/candidate/app/auth/signup/page.tsx apps/admin/app/auth/signin/page.tsx apps/author/app/auth/signin/page.tsx apps/coordinator/app/auth/signin/page.tsx apps/reviewer/app/auth/signin/page.tsx
git commit -m "feat: add sign-in pages to all apps, sign-up page to candidate app"
```

---

## Task 4: Create Dashboard Layout for All 5 Apps

Each app needs a `/dashboard` route group with a layout that:
1. Checks session server-side (redirects to sign-in if missing)
2. Renders a sidebar with app-specific nav links
3. Renders a header with UserMenu (sign-out)

**Files (per app):**
- Create: `apps/{app}/app/dashboard/layout.tsx`
- Create: `apps/{app}/app/dashboard/page.tsx`

**Step 1: Create a shared DashboardShell component in packages/ui**

```tsx
// packages/ui/components/dashboard-shell.tsx
'use client';

import { UserMenu } from './user-menu';

interface NavItem {
  label: string;
  href: string;
  icon?: string;
}

interface DashboardShellProps {
  appName: string;
  navItems: NavItem[];
  children: React.ReactNode;
}

export function DashboardShell({ appName, navItems, children }: DashboardShellProps) {
  return (
    <div className="min-h-screen flex">
      {/* Sidebar */}
      <aside className="hidden md:flex md:w-64 md:flex-col border-r bg-card">
        <div className="flex h-14 items-center border-b px-4">
          <span className="font-semibold text-lg">ProctorGuard</span>
        </div>
        <div className="px-3 py-2">
          <p className="mb-2 px-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground">
            {appName}
          </p>
          <nav className="space-y-1">
            {navItems.map((item) => (
              <a
                key={item.href}
                href={item.href}
                className="flex items-center rounded-md px-2 py-2 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
              >
                {item.label}
              </a>
            ))}
          </nav>
        </div>
      </aside>

      {/* Main content */}
      <div className="flex flex-1 flex-col">
        {/* Header */}
        <header className="flex h-14 items-center justify-between border-b bg-card px-4 md:px-6">
          <div className="md:hidden font-semibold">ProctorGuard</div>
          <div className="hidden md:block" />
          <UserMenu />
        </header>

        {/* Page content */}
        <main className="flex-1 p-4 md:p-6">
          {children}
        </main>
      </div>
    </div>
  );
}
```

**Step 2: Export DashboardShell from packages/ui/index.tsx**

Add to `packages/ui/index.tsx`:

```ts
export * from './components/dashboard-shell';
```

**Step 3: Create dashboard layout + page for each app**

Each app's dashboard layout checks the session server-side:

```tsx
// apps/candidate/app/dashboard/layout.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';
import { redirect } from 'next/navigation';
import { DashboardShell } from '@proctorguard/ui';

const navItems = [
  { label: 'Dashboard', href: '/dashboard' },
  { label: 'My Exams', href: '/dashboard/exams' },
  { label: 'Results', href: '/dashboard/results' },
];

export default async function DashboardLayout({ children }: { children: React.ReactNode }) {
  const session = await auth.api.getSession({ headers: await headers() });
  if (!session) redirect('/auth/signin');

  return (
    <DashboardShell appName="Candidate Portal" navItems={navItems}>
      {children}
    </DashboardShell>
  );
}
```

```tsx
// apps/admin/app/dashboard/layout.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';
import { redirect } from 'next/navigation';
import { DashboardShell } from '@proctorguard/ui';

const navItems = [
  { label: 'Dashboard', href: '/dashboard' },
  { label: 'Users', href: '/dashboard/users' },
  { label: 'Departments', href: '/dashboard/departments' },
  { label: 'Settings', href: '/dashboard/settings' },
];

export default async function DashboardLayout({ children }: { children: React.ReactNode }) {
  const session = await auth.api.getSession({ headers: await headers() });
  if (!session) redirect('/auth/signin');

  return (
    <DashboardShell appName="Admin Dashboard" navItems={navItems}>
      {children}
    </DashboardShell>
  );
}
```

```tsx
// apps/author/app/dashboard/layout.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';
import { redirect } from 'next/navigation';
import { DashboardShell } from '@proctorguard/ui';

const navItems = [
  { label: 'Dashboard', href: '/dashboard' },
  { label: 'Question Banks', href: '/dashboard/question-banks' },
];

export default async function DashboardLayout({ children }: { children: React.ReactNode }) {
  const session = await auth.api.getSession({ headers: await headers() });
  if (!session) redirect('/auth/signin');

  return (
    <DashboardShell appName="Question Author" navItems={navItems}>
      {children}
    </DashboardShell>
  );
}
```

```tsx
// apps/coordinator/app/dashboard/layout.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';
import { redirect } from 'next/navigation';
import { DashboardShell } from '@proctorguard/ui';

const navItems = [
  { label: 'Dashboard', href: '/dashboard' },
  { label: 'Exams', href: '/dashboard/exams' },
  { label: 'Enrollments', href: '/dashboard/enrollments' },
];

export default async function DashboardLayout({ children }: { children: React.ReactNode }) {
  const session = await auth.api.getSession({ headers: await headers() });
  if (!session) redirect('/auth/signin');

  return (
    <DashboardShell appName="Exam Coordinator" navItems={navItems}>
      {children}
    </DashboardShell>
  );
}
```

```tsx
// apps/reviewer/app/dashboard/layout.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';
import { redirect } from 'next/navigation';
import { DashboardShell } from '@proctorguard/ui';

const navItems = [
  { label: 'Dashboard', href: '/dashboard' },
  { label: 'Sessions', href: '/dashboard/sessions' },
  { label: 'Flags', href: '/dashboard/flags' },
];

export default async function DashboardLayout({ children }: { children: React.ReactNode }) {
  const session = await auth.api.getSession({ headers: await headers() });
  if (!session) redirect('/auth/signin');

  return (
    <DashboardShell appName="Session Reviewer" navItems={navItems}>
      {children}
    </DashboardShell>
  );
}
```

**Step 4: Create placeholder dashboard pages for each app**

Each app gets a simple welcome dashboard page:

```tsx
// apps/candidate/app/dashboard/page.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';

export default async function DashboardPage() {
  const session = await auth.api.getSession({ headers: await headers() });

  return (
    <div>
      <h1 className="text-2xl font-bold mb-4">Welcome, {session?.user.name}</h1>
      <p className="text-muted-foreground">Your upcoming exams will appear here.</p>
    </div>
  );
}
```

```tsx
// apps/admin/app/dashboard/page.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';

export default async function DashboardPage() {
  const session = await auth.api.getSession({ headers: await headers() });

  return (
    <div>
      <h1 className="text-2xl font-bold mb-4">Welcome, {session?.user.name}</h1>
      <p className="text-muted-foreground">Manage your organization from here.</p>
    </div>
  );
}
```

```tsx
// apps/author/app/dashboard/page.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';

export default async function DashboardPage() {
  const session = await auth.api.getSession({ headers: await headers() });

  return (
    <div>
      <h1 className="text-2xl font-bold mb-4">Welcome, {session?.user.name}</h1>
      <p className="text-muted-foreground">Your question banks will appear here.</p>
    </div>
  );
}
```

```tsx
// apps/coordinator/app/dashboard/page.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';

export default async function DashboardPage() {
  const session = await auth.api.getSession({ headers: await headers() });

  return (
    <div>
      <h1 className="text-2xl font-bold mb-4">Welcome, {session?.user.name}</h1>
      <p className="text-muted-foreground">Your exams will appear here.</p>
    </div>
  );
}
```

```tsx
// apps/reviewer/app/dashboard/page.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';

export default async function DashboardPage() {
  const session = await auth.api.getSession({ headers: await headers() });

  return (
    <div>
      <h1 className="text-2xl font-bold mb-4">Welcome, {session?.user.name}</h1>
      <p className="text-muted-foreground">Sessions to review will appear here.</p>
    </div>
  );
}
```

**Step 5: Commit**

```bash
git add packages/ui/components/dashboard-shell.tsx packages/ui/index.tsx
git add apps/candidate/app/dashboard/ apps/admin/app/dashboard/ apps/author/app/dashboard/ apps/coordinator/app/dashboard/ apps/reviewer/app/dashboard/
git commit -m "feat: add session-protected dashboard layouts with sidebar nav and user menu for all apps"
```

---

## Task 5: Update Landing Pages to Redirect Authenticated Users

If a user is already signed in and visits `/`, redirect them to `/dashboard`.

**Files:**
- Modify: `apps/{app}/app/page.tsx` (all 5 apps)

**Step 1: Update each app's landing page**

Add a server-side session check that redirects to dashboard if authenticated. Keep the existing landing page for unauthenticated users. Example for candidate:

```tsx
// apps/candidate/app/page.tsx
import { auth } from '@proctorguard/auth';
import { headers } from 'next/headers';
import { redirect } from 'next/navigation';
import { Button, Card, CardContent, CardDescription, CardHeader, CardTitle } from '@proctorguard/ui';
import Link from 'next/link';

export default async function HomePage() {
  const session = await auth.api.getSession({ headers: await headers() });
  if (session) redirect('/dashboard');

  return (
    // ... existing landing page JSX unchanged
  );
}
```

Repeat for all 5 apps -- add the session check + redirect at the top, keep existing JSX.

**Step 2: Commit**

```bash
git add apps/candidate/app/page.tsx apps/admin/app/page.tsx apps/author/app/page.tsx apps/coordinator/app/page.tsx apps/reviewer/app/page.tsx
git commit -m "feat: redirect authenticated users from landing page to dashboard"
```

---

## Task 6: Smoke Test the Full Auth Flow

**Step 1: Ensure DB is seeded**

Run: `npm run db:seed`

This creates 7 test users (see CLAUDE.md for credentials).

**Step 2: Start all apps**

Run: `npm run dev`

**Step 3: Manual smoke test**

Test this flow on candidate app (http://localhost:3001):

1. Visit `/` -- should see landing page (not signed in)
2. Click "Sign In" -- should go to `/auth/signin`
3. Enter `candidate@acme.com` / `password123` -- should redirect to `/dashboard`
4. Dashboard should show sidebar with nav, header with user name + sign-out
5. Click "Sign out" -- should redirect to `/auth/signin`
6. Visit `/dashboard` directly -- should redirect to `/auth/signin` (middleware)
7. Visit `/` -- should see landing page again

Test sign-up on candidate app:
1. Go to `/auth/signup`
2. Create new account -- should redirect to `/dashboard`

Test on admin app (http://localhost:3002):
1. Sign in as `orgadmin@acme.com` / `password123`
2. Verify dashboard loads with admin nav items
3. Sign out works

**Step 4: Fix any issues found, then final commit if needed**

---

## Summary

| Task | What | Files Created/Modified |
|------|------|-----------------------|
| 1 | Auth client package | `packages/auth/client.ts` |
| 2 | Shared form + menu components | `packages/ui/components/{sign-in-form,sign-up-form,user-menu,dashboard-shell}.tsx`, `packages/ui/index.tsx`, `packages/ui/package.json` |
| 3 | Auth pages per app | `apps/*/app/auth/signin/page.tsx`, `apps/candidate/app/auth/signup/page.tsx` |
| 4 | Dashboard layouts + pages | `apps/*/app/dashboard/{layout,page}.tsx` |
| 5 | Landing page redirects | `apps/*/app/page.tsx` (modify) |
| 6 | Smoke test | No files |

Total: ~25 new files, ~5 modified files, 5 commits.
